---

HttpEchoResponse:
  description: "echoed response"
  content:
    application/json:
      schema:
        $ref: '#/components/schemas/EchoResponse'

HttpBadRequestResponse:
  description: "400 - Bad Request"
  content:
    application/json:
      schema:
        $ref: '#/components/schemas/DebugMessageResponse'

HttpNotFoundResponse:
  description: "404 - Resource not found"
  content:
    application/json:
      schema:
        $ref: '#/components/schemas/DebugMessageResponse'

HttpNoContentResponse:
  description: "204 - No Content"
  content:
    application/json:
      schema:
        $ref: '#/components/schemas/DebugMessageResponse'

HttpForbiddenResponse:
  description: "403 - Required permssions not present."
  content:
    application/json:
      schema:
        $ref: '#/components/schemas/DebugMessageResponse'

HttpUnauthorizedResponse:
  description: "401 - Not Authorized to perform this action"
  content:
    application/json:
      schema:
        $ref: '#/components/schemas/DebugMessageResponse'

HttpOKResponse:
  description: "200 - OK"
  content:
    application/json:
      schema:
        $ref: '#/components/schemas/DebugMessageResponse'

HttpBadGatewayResponse:
  description: "502- Bad Gateway"
  content:
    application/json:
      schema:
        $ref: '#/components/schemas/DebugMessageResponse'

HttpConflictResponse:
  description: "409- Conflict"
  content:
    application/json:
      schema:
        $ref: '#/components/schemas/DebugMessageResponse'

HttpInternalServerErrorResponse:
  description: "500 - Internal Server Error"
  content:
    application/json:
      schema:
        $ref: '#/components/schemas/DebugMessageResponse'

HttpTransactionHistoryResponse:
  description: "200 - Document follows"
  content:
    application/json:
      schema:
        $ref: '#/components/schemas/HistoryTransaction'

HttpDataLakeStatusGetResponse:
  description: "200 - Document follows"
  content:
    application/json:
      schema:
        $ref: '#/components/schemas/DataLakeStatusResponse'

HttpTransactionPutResponse:
  description: "201 - Object created"
  content:
    application/json:
      schema:
        type: object
        parameters:
          transactionId:
            $ref: "#/components/schemas/TransactionId"

HttpTransactionHistorySearchResponse:
  description: "200 - Document follows"
  content:
    application/json:
      schema:
        type: object
        properties:
          transactions:
            type: array
            items:
              $ref: '#/components/schemas/HistoryTransaction'


components:
  schemas:
    DataLakeCollectionName:
      type: string
      description: Datalake (mongo) collection.
      example: 'source-2025-01-30'

    DataLakeStatusResponse:
      type: object
      description: >-
        Response of querying for datalake status. Datalake status is recorded by
        collection. By default, the recent known record will be returned.
      properties:
        records:
          $ref: '#/components/schemas/DatalakeStatusHistory'

    DatalakeStatusHistory:
      type: array
      description: Container holding records of data lake sync records.
      items:
        - $ref: '#/components/schemas/DataLakeStatus'

    DataLakeStatus:
      type: object
      properties:
        collection:
          $ref: '#/components/schemas/DataLakeCollectionName'
        lastSyncTimestamp:
          $ref: '#/components/schemas/LastSyncTimestamp'
        lastSyncRecordsUploaded:
          $ref: '#/components/schemas/LastSyncRecordsUploaded'
      required:
        - lastSyncTimestamp
        - lastSyncRecordsUploaded

    DebugMessageResponse:
      type: object
      properties:
        message:
          type: string
          description: A message attached to an HTTP response for debugging purposes.

    EchoResponse:
      type: object
      properties:
        echoed_value:
          type: string
          description: The value that was echoed back.

    HistoryTransaction:
      type: object
      properties:
        id:
          $ref: '#/components/schemas/TransactionId'

    TransactionId:
      type: string
      description: A unique identifier for a transaction.
      example: "a400eb84-ee4d-4362-b2ac-731ef7a232f3"

    LastSyncTimestamp:
      type: string
      format: datetime
      example: "2025-09-21T03:39:07.757+00:00"

    LastSyncRecordsUploaded:
      type: integer
      description: The `records_uploaded` value in the most recent sync record.
      example: 20

